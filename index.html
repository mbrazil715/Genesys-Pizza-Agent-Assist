<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genesys Pizza Agent Assist</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* CSS Reset and Utility Classes */
        :root {
            --gp-red: #ff6b6b;
            --gp-red-dark: #ee5a52;
            --gp-dark: #2d3436;
            --gp-light-grey: #f8f9fa;
            --gp-medium-grey: #e9ecef;
            --gp-border-grey: #dee2e6;
            --gp-border-radius: 12px;
            --gp-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --gp-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 14px;
            color: var(--gp-dark);
            background-color: #ffffff;
            overflow: hidden;
        }

        #app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        header {
            background: linear-gradient(135deg, var(--gp-red) 0%, var(--gp-red-dark) 100%);
            color: white;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            box-shadow: var(--gp-shadow);
            z-index: 10;
        }

        .logo-placeholder {
            font-weight: bold;
            font-size: 1.8em;
            margin-right: 15px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        #main-layout {
            display: flex;
            flex-grow: 1;
            overflow: hidden;
        }

        nav {
            width: 220px;
            background-color: #ffffff;
            padding: 16px 0;
            flex-shrink: 0;
            overflow-y: auto;
            border-right: 1px solid var(--gp-border-grey);
        }

        .nav-button {
            display: flex;
            align-items: center;
            width: calc(100% - 16px);
            margin: 4px 8px;
            padding: 12px 16px;
            text-align: left;
            border: none;
            background-color: transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.95em;
            color: var(--gp-dark);
            border-radius: 10px;
        }

        .nav-button .material-icons {
            margin-right: 12px;
            font-size: 22px;
            transition: transform 0.2s ease;
        }

        .nav-button:hover, .nav-button:focus {
            background-color: var(--gp-light-grey);
            transform: translateX(4px);
            outline: none;
        }

        .nav-button:hover .material-icons {
            transform: scale(1.1);
        }

        .nav-button.active {
            background: linear-gradient(135deg, var(--gp-red) 0%, var(--gp-red-dark) 100%);
            color: white;
            font-weight: 600;
            box-shadow: var(--gp-shadow);
        }

        .nav-button.active:hover {
             background: linear-gradient(135deg, var(--gp-red-dark) 0%, #e64e47 100%);
             transform: translateX(4px);
        }

        main {
            flex-grow: 1;
            padding: 24px;
            overflow-y: auto;
            background-color: var(--gp-light-grey);
        }

        .content-panel {
            display: none;
        }

        .content-panel.active {
            display: block;
        }

        h2 {
            font-size: 1.8em;
            color: var(--gp-dark);
            margin-bottom: 24px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h3 {
            font-size: 1.15em;
            margin-top: 24px;
            margin-bottom: 12px;
            color: var(--gp-dark);
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gp-dark);
            font-size: 0.9em;
        }

        input[type="text"], input[type="time"], select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gp-border-grey);
            border-radius: var(--gp-border-radius);
            font-size: 1em;
            font-family: inherit;
            background-color: white;
            transition: all 0.2s ease;
        }

        input[type="text"]:focus, input[type="time"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--gp-red);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: var(--gp-border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.95em;
        }

        .primary-button {
            background: linear-gradient(135deg, var(--gp-red) 0%, var(--gp-red-dark) 100%);
            color: white;
            box-shadow: var(--gp-shadow);
        }

        .primary-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--gp-shadow-hover);
        }

        .primary-button:active {
            transform: translateY(0);
        }

        .secondary-button {
            background-color: white;
            color: var(--gp-dark);
            border: 2px solid var(--gp-border-grey);
        }

        .secondary-button:hover {
            background-color: var(--gp-light-grey);
            border-color: var(--gp-red);
            color: var(--gp-red);
        }

        #toppings-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 16px;
            background-color: white;
            border-radius: var(--gp-border-radius);
            overflow: hidden;
            box-shadow: var(--gp-shadow);
        }

        #toppings-table th, #toppings-table td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--gp-border-grey);
        }

        #toppings-table th {
            background-color: var(--gp-light-grey);
            font-weight: 600;
            color: var(--gp-dark);
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #toppings-table tbody tr {
            transition: background-color 0.15s ease;
        }

        #toppings-table tbody tr:hover {
            background-color: var(--gp-light-grey);
        }

        #toppings-table tbody tr:last-child td {
            border-bottom: none;
        }

        .available-yes { 
            color: #51cf66; 
            font-weight: 600;
        }
        .available-no { 
            color: var(--gp-red); 
            font-weight: 600;
        }

        .suggested-combinations-container span {
            display: inline-block;
            background: linear-gradient(135deg, #fff5e6 0%, #ffe8cc 100%);
            padding: 10px 18px;
            border-radius: 20px;
            margin-right: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s ease;
            border: 2px solid transparent;
            font-weight: 500;
        }

        .suggested-combinations-container span:hover {
            transform: translateY(-2px);
            box-shadow: var(--gp-shadow);
            border-color: #ffa94d;
        }

        .accordion-item {
            background-color: white;
            border: 2px solid var(--gp-border-grey);
            border-radius: var(--gp-border-radius);
            margin-bottom: 12px;
            overflow: hidden;
            box-shadow: var(--gp-shadow);
            transition: all 0.2s ease;
        }

        .accordion-item:hover {
            box-shadow: var(--gp-shadow-hover);
        }

        .accordion-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background-color: white;
            border: none;
            text-align: left;
            font-weight: 600;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
            color: var(--gp-dark);
        }

        .accordion-header:hover {
            background-color: var(--gp-light-grey);
        }

        .accordion-content {
            padding: 16px 20px;
            border-top: 1px solid var(--gp-border-grey);
            display: none;
            background-color: var(--gp-light-grey);
            line-height: 1.6;
        }

        .stepper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin: 20px 0 30px;
            position: relative;
        }

        .stepper::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 5%;
            right: 5%;
            height: 3px;
            background: linear-gradient(90deg, var(--gp-border-grey) 0%, var(--gp-medium-grey) 100%);
            z-index: 1;
            border-radius: 2px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            width: 20%;
        }

        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: white;
            border: 3px solid var(--gp-border-grey);
            color: var(--gp-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .step.completed .step-circle {
            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);
            border-color: #51cf66;
            color: white;
        }

        .step.active .step-circle {
            background: linear-gradient(135deg, var(--gp-red) 0%, var(--gp-red-dark) 100%);
            border-color: var(--gp-red);
            color: white;
            box-shadow: 0 0 0 6px rgba(255, 107, 107, 0.15);
            transform: scale(1.1);
        }

        .step-label {
            text-align: center;
            font-size: 0.85em;
            margin-top: 8px;
            font-weight: 500;
            color: #868e96;
        }

        .step.active .step-label,
        .step.completed .step-label {
            color: var(--gp-dark);
            font-weight: 600;
        }

        #order-status-message {
            margin-top: 20px;
            padding: 16px 20px;
            background: linear-gradient(135deg, #fff9db 0%, #fff3bf 100%);
            border: 2px solid #ffd43b;
            border-radius: var(--gp-border-radius);
            font-weight: 500;
            color: #665c00;
            box-shadow: var(--gp-shadow);
        }

        .scenario-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .scenario-card {
            padding: 20px;
            border: 2px solid var(--gp-border-grey);
            border-radius: var(--gp-border-radius);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
            text-align: center;
            background-color: white;
            box-shadow: var(--gp-shadow);
        }

        .scenario-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--gp-shadow-hover);
            border-color: var(--gp-red);
        }
        
        .scenario-card.selected {
            background: linear-gradient(135deg, #ffe3e3 0%, #ffd4d4 100%);
            border-color: var(--gp-red);
            color: var(--gp-red-dark);
        }

        #copy-confirm {
            margin-left: 12px;
            color: #51cf66;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        @media (max-width: 768px) {
            #main-layout {
                flex-direction: column;
                overflow-y: auto;
            }

            nav {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--gp-medium-grey);
                display: flex;
                overflow-x: auto;
                padding: 0;
            }

            .nav-button {
                flex-shrink: 0;
                padding: 10px 12px;
                font-size: 0.9em;
                justify-content: center;
                border-left: none !important;
                border-bottom: 3px solid transparent;
            }

            .nav-button .material-icons {
                margin-right: 5px;
            }
            
            .nav-button.active {
                border-bottom: 3px solid white;
                border-left: none;
            }

            header {
                padding: 8px 15px;
            }

            h2 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <div id="app-container">
        <header>
            <div class="logo-placeholder">üçï</div>
            <h1>Geneeys Pizza Agent Assist</h1>
        </header>

        <div id="main-layout">
            <nav>
                <button class="nav-button active" data-panel="overview">
                    <span class="material-icons">person</span> Overview
                </button>
                <button class="nav-button" data-panel="toppings">
                    <span class="material-icons">menu_book</span> Toppings Support
                </button>
                <button class="nav-button" data-panel="kb">
                    <span class="material-icons">quiz</span> Knowledge Base
                </button>
                <button class="nav-button" data-panel="tracking">
                    <span class="material-icons">route</span> Order Tracking
                </button>
                <button class="nav-button" data-panel="scenarios">
                    <span class="material-icons">contact_support</span> Scenarios & Scripts
                </button>
                <button class="nav-button" data-panel="notes">
                    <span class="material-icons">notes</span> Agent Notes
                </button>
            </nav>

            <main>
                <section id="overview" class="content-panel active">
                    <h2>Customer & Order Overview</h2>
                    
                    <!-- Phone Script Card -->
                    <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 20px; border-radius: var(--gp-border-radius); box-shadow: var(--gp-shadow); margin-bottom: 24px; border: 2px solid #90caf9;">
                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                            <span class="material-icons" style="color: #1976d2; margin-right: 8px; font-size: 28px;">phone_in_talk</span>
                            <h3 style="margin: 0; color: #1565c0;">Greeting Script</h3>
                        </div>
                        <p style="font-size: 1.05em; line-height: 1.6; margin: 0; color: #0d47a1; font-weight: 500;">
                            "Thank you for calling Geneeys Pizza, this is [Your Name]. I see you've been speaking with our assistant about order <strong>GP-451993</strong>. I'm here to help you with <strong>tracking your delivery</strong>. How can I assist you further today?"
                        </p>
                    </div>

                    <!-- AI Voice Bot Summary Card -->
                    <div style="background-color: white; padding: 20px; border-radius: var(--gp-border-radius); box-shadow: var(--gp-shadow); margin-bottom: 24px; border-left: 4px solid #7c4dff;">
                        <div style="display: flex; align-items: center; margin-bottom: 16px;">
                            <span class="material-icons" style="color: #7c4dff; margin-right: 8px; font-size: 28px;">smart_toy</span>
                            <h3 style="margin: 0; color: var(--gp-dark);">AI Voice Bot Summary</h3>
                        </div>
                        
                        <div style="background-color: #f3e5f5; padding: 14px; border-radius: 8px; margin-bottom: 16px;">
                            <div style="font-size: 0.85em; color: #6a1b9a; font-weight: 600; margin-bottom: 6px;">REASON FOR CALL</div>
                            <div style="color: #4a148c; font-size: 1.05em;">Customer wants to track delivery status and confirm estimated arrival time</div>
                        </div>

                        <div style="background-color: #fff3e0; padding: 14px; border-radius: 8px; margin-bottom: 16px;">
                            <div style="font-size: 0.85em; color: #e65100; font-weight: 600; margin-bottom: 6px;">CUSTOMER SENTIMENT</div>
                            <div style="display: flex; align-items: center;">
                                <span style="display: inline-block; width: 12px; height: 12px; background-color: #ffa726; border-radius: 50%; margin-right: 8px;"></span>
                                <span style="color: #e65100; font-weight: 600;">Neutral - Slightly Concerned</span>
                            </div>
                        </div>

                        <div style="background-color: #e8f5e9; padding: 14px; border-radius: 8px;">
                            <div style="font-size: 0.85em; color: #2e7d32; font-weight: 600; margin-bottom: 6px;">AUTHENTICATION STATUS</div>
                            <div style="display: flex; align-items: center;">
                                <span class="material-icons" style="color: #4caf50; font-size: 20px; margin-right: 6px;">check_circle</span>
                                <span style="color: #1b5e20; font-weight: 600;">Verified via phone number and order number</span>
                            </div>
                        </div>
                    </div>

                    <!-- Customer & Order Details -->
                    <div style="background-color: white; padding: 20px; border-radius: var(--gp-border-radius); box-shadow: var(--gp-shadow);">
                        <h3 style="margin-top: 0;">Customer & Order Details</h3>
                        <form id="order-form">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                                <div class="form-group">
                                    <label for="cust-name">Customer Name</label>
                                    <input type="text" id="cust-name" value="Jane Doe" readonly style="background-color: var(--gp-light-grey);">
                                </div>
                                <div class="form-group">
                                    <label for="phone-number">Phone Number</label>
                                    <input type="text" id="phone-number" value="317-555-1212" readonly style="background-color: var(--gp-light-grey);">
                                </div>
                                <div class="form-group">
                                    <label for="order-number">Order Number</label>
                                    <input type="text" id="order-number" value="GP-451993" readonly style="background-color: var(--gp-light-grey);">
                                </div>
                                <div class="form-group">
                                    <label for="order-type">Order Type</label>
                                    <select id="order-type" disabled style="background-color: var(--gp-light-grey);">
                                        <option value="Delivery" selected>Delivery</option>
                                        <option value="Pickup">Pickup</option>
                                        <option value="Dine-in">Dine-in</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="store-location">Store Location</label>
                                    <select id="store-location" disabled style="background-color: var(--gp-light-grey);">
                                        <option value="1">Main Street, Indianapolis</option>
                                        <option value="2" selected>Georgetown Rd, Indianapolis</option>
                                        <option value="3">Broad Ripple, Indianapolis</option>
                                        <option value="4">Virtual Kitchen #4</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="delivery-address">Delivery Address</label>
                                    <input type="text" id="delivery-address" value="742 Evergreen Terrace, Indianapolis" readonly style="background-color: var(--gp-light-grey);">
                                </div>
                            </div>
                        </form>
                    </div>
                </section>

                <section id="toppings" class="content-panel">
                    <h2>Toppings Support</h2>

                    <div class="form-group">
                        <label for="topping-search">Search Toppings</label>
                        <input type="text" id="topping-search" placeholder="Type a topping name to filter...">
                    </div>

                    <div class="table-container">
                        <table id="toppings-table">
                            <thead>
                                <tr>
                                    <th>Topping Name</th>
                                    <th>Category</th>
                                    <th>Availability</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>

                    <h3>Suggested Combinations</h3>
                    <div id="suggested-combinations" class="suggested-combinations-container">
                        <span data-preset="meat-lover">Family Meat Lover</span>
                        <span data-preset="veggie-delight">Garden Veggie Delight</span>
                        <span data-preset="classic-margherita">Classic Margherita</span>
                    </div>
                    <p id="combo-description" style="margin-top: 10px; min-height: 20px; color: var(--gp-dark);"></p>

                </section>

                <section id="kb" class="content-panel">
                    <h2>Pizza Knowledge Base (FAQ)</h2>

                    <div class="accordion-item">
                        <button class="accordion-header" aria-expanded="false" aria-controls="faq1">
                            <span>What sizes do we offer?</span>
                            <span class="material-icons">expand_more</span>
                        </button>
                        <div class="accordion-content" id="faq1">
                            <p>We offer Small (10"), Medium (12"), Large (14"), and Extra Large (16"). Crust options vary by size. The small size is personal only and available with thin crust.</p>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <button class="accordion-header" aria-expanded="false" aria-controls="faq2">
                            <span>How do cooking times differ by crust type?</span>
                            <span class="material-icons">expand_more</span>
                        </button>
                        <div class="accordion-content" id="faq2">
                            <p><strong>Thin Crust:</strong> Approx. 8-10 minutes. <strong>Original Hand Tossed:</strong> Approx. 12-15 minutes. <strong>Deep Dish:</strong> Approx. 18-22 minutes. These are estimated times for the baking stage only.</p>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <button class="accordion-header" aria-expanded="false" aria-controls="faq3">
                            <span>What are common allergy considerations?</span>
                            <span class="material-icons">expand_more</span>
                        </button>
                        <div class="accordion-content" id="faq3">
                            <p><strong>Gluten:</strong> Gluten-free crust available (Small size only, separate prep area). <strong>Dairy:</strong> Vegan cheese substitute available. <strong>Nuts:</strong> We are a nut-free facility, but always advise customers with severe allergies to use caution due to supplier ingredients.</p>
                        </div>
                    </div>

                </section>

                <section id="tracking" class="content-panel">
                    <h2>Order Tracking</h2>

                    <div style="background-color: white; padding: 20px; border-radius: var(--gp-border-radius); box-shadow: var(--gp-shadow); margin-bottom: 24px;">
                        <h3 style="margin-top: 0;">Customer Information</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
                            <div>
                                <div style="font-size: 0.85em; color: #868e96; font-weight: 600; margin-bottom: 4px;">CUSTOMER NAME</div>
                                <div style="font-weight: 600; color: var(--gp-dark);">Jane Doe</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85em; color: #868e96; font-weight: 600; margin-bottom: 4px;">ORDER NUMBER</div>
                                <div style="font-weight: 600; color: var(--gp-dark);">GP-451993</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85em; color: #868e96; font-weight: 600; margin-bottom: 4px;">PHONE</div>
                                <div style="font-weight: 600; color: var(--gp-dark);">317-555-1212</div>
                            </div>
                            <div>
                                <div style="font-size: 0.85em; color: #868e96; font-weight: 600; margin-bottom: 4px;">ORDER TYPE</div>
                                <div style="font-weight: 600; color: var(--gp-dark);">Delivery</div>
                            </div>
                        </div>
                    </div>

                    <h3>Current Stage</h3>
                    <div class="stepper" id="order-stepper">
                        <div class="step" data-stage-index="0">
                            <div class="step-circle">1</div>
                            <div class="step-label">Order Placed</div>
                        </div>
                        <div class="step" data-stage-index="1">
                            <div class="step-circle">2</div>
                            <div class="step-label">Preparing</div>
                        </div>
                        <div class="step" data-stage-index="2">
                            <div class="step-circle">3</div>
                            <div class="step-label">Baking</div>
                        </div>
                        <div class="step" data-stage-index="3">
                            <div class="step-circle">4</div>
                            <div class="step-label">Out for Delivery</div>
                        </div>
                        <div class="step" data-stage-index="4">
                            <div class="step-circle">5</div>
                            <div class="step-label">Delivered</div>
                        </div>
                    </div>

                    <div id="order-status-message">Order status will appear here.</div>

                    <h3>Update Status</h3>
                    <div class="form-group" style="display: flex; gap: 10px; align-items: flex-end;">
                        <div style="flex-grow: 1;">
                            <label for="current-stage-select">Set Current Stage</label>
                            <select id="current-stage-select">
                                <option value="0">Order Placed</option>
                                <option value="1">Preparing</option>
                                <option value="2">Baking</option>
                                <option value="3">Out for Delivery</option>
                                <option value="4">Delivered</option>
                            </select>
                        </div>
                        <button type="button" class="secondary-button" id="update-stage-button">Update Stage</button>
                    </div>

                    <h3>Delivery Details</h3>
                    <div class="form-group">
                        <label for="driver-name">Driver Name</label>
                        <input type="text" id="driver-name" value="Michael S.">
                    </div>
                    <div class="form-group">
                        <label for="est-delivery-time">Estimated Delivery Time (EDT)</label>
                        <input type="time" id="est-delivery-time" value="">
                    </div>
                </section>

                <section id="scenarios" class="content-panel">
                    <h2>Common Scenarios & Scripts</h2>

                    <h3>Select a Scenario</h3>
                    <div class="scenario-grid" id="scenario-grid">
                        <div class="scenario-card" data-scenario="wrong-toppings">Wrong Toppings</div>
                        <div class="scenario-card" data-scenario="late-delivery">Late Delivery</div>
                        <div class="scenario-card" data-scenario="cold-pizza">Cold Pizza</div>
                        <div class="scenario-card" data-scenario="never-arrived">Order Never Arrived</div>
                    </div>

                    <div id="scenario-details" style="display: none; border-top: 2px solid var(--gp-border-grey); padding-top: 24px; margin-top: 24px;">
                        <h3>Suggested Script</h3>
                        <textarea id="suggested-script" readonly style="min-height: 150px; background-color: var(--gp-light-grey); border: 2px solid var(--gp-border-grey);"></textarea>

                        <h3>Possible Actions</h3>
                        <ul id="possible-actions" style="list-style-type: none; padding-left: 0; margin-top: 10px;">
                            <li style="margin-bottom: 8px;"><input type="checkbox" id="action1"> <label for="action1" style="cursor: pointer;">Issue 50% Refund</label></li>
                            <li style="margin-bottom: 8px;"><input type="checkbox" id="action2"> <label for="action2" style="cursor: pointer;">Remake Order (Rush)</label></li>
                            <li style="margin-bottom: 8px;"><input type="checkbox" id="action3"> <label for="action3" style="cursor: pointer;">Apply $5.00 Coupon for Next Order</label></li>
                        </ul>
                    </div>
                </section>

                <section id="notes" class="content-panel">
                    <h2>Agent Notes</h2>
                    <div class="form-group">
                        <label for="call-notes">Call Notes</label>
                        <textarea id="call-notes" placeholder="Transcribe key customer details, actions taken, and resolution here..."></textarea>
                    </div>
                    <button type="button" class="secondary-button" id="copy-notes-button">
                        <span class="material-icons">content_copy</span> Copy Notes to Clipboard
                    </button>
                    <span id="copy-confirm">Copied!</span>
                </section>

            </main>
        </div>
    </div>

    <script>
        const TOPPINGS_DATA = [
            { name: "Pepperoni", category: "Meat", available: true, notes: "Most popular. Classic." },
            { name: "Sausage (Italian)", category: "Meat", available: true, notes: "Mildly spicy, crumble style." },
            { name: "Bacon", category: "Meat", available: true, notes: "Smoked, crispy pieces." },
            { name: "Chicken (Grilled)", category: "Meat", available: false, notes: "Temporarily out of stock." },
            { name: "Mushrooms", category: "Veggie", available: true, notes: "Fresh slices." },
            { name: "Onions (Red)", category: "Veggie", available: true, notes: "Sharp flavor." },
            { name: "Green Peppers", category: "Veggie", available: true, notes: "Standard bell peppers." },
            { name: "Mozzarella", category: "Cheese", available: true, notes: "Whole milk, low moisture." },
            { name: "Feta", category: "Cheese", available: true, notes: "Crumbled, sharp taste." },
            { name: "Pineapple", category: "Other", available: true, notes: "Controversial but available." },
            { name: "Jalapenos", category: "Other", available: true, notes: "Spicy slices." },
        ];
        
        const COMBO_DATA = {
            'meat-lover': {
                name: "Family Meat Lover",
                toppings: ["Pepperoni", "Sausage (Italian)", "Bacon"],
                desc: "A hearty combination of our three most popular meats: Pepperoni, Italian Sausage, and Bacon."
            },
            'veggie-delight': {
                name: "Garden Veggie Delight",
                toppings: ["Mushrooms", "Onions (Red)", "Green Peppers"],
                desc: "A fresh and savory mix of Mushrooms, Red Onions, and Green Peppers."
            },
            'classic-margherita': {
                name: "Classic Margherita",
                toppings: ["Mozzarella", "Feta"],
                desc: "Simple and classic: Mozzarella cheese, a touch of Feta, and basil (note: mention basil, but it's not a searchable topping)."
            }
        };

        const SCENARIOS = {
            'wrong-toppings': {
                script: "I apologize sincerely that we got your toppings wrong. That is absolutely not the experience we want for you. Can you confirm the incorrect toppings and what you had originally ordered? We can offer to remake the pizza immediately and deliver it, or issue a 50% refund.",
                actions: [0, 1]
            },
            'late-delivery': {
                script: "I see your order is significantly delayed, and I truly apologize for the wait. Let me check the driver's current location and give you a more accurate ETA. For the inconvenience, I'd like to apply a $5.00 coupon to your account for your next order.",
                actions: [2]
            },
            'cold-pizza': {
                script: "I am so sorry to hear your pizza arrived cold. That suggests an issue with the delivery bag or a delay. We can remake the order for you as a rush order and re-deliver it, or we can issue a full refund.",
                actions: [0, 1]
            },
            'never-arrived': {
                script: "Oh dear, I apologize that your order never made it to you. That is unacceptable. Let me confirm the delivery address and payment. I will immediately initiate a full refund and can also offer to place a new order now for free.",
                actions: [0, 1]
            }
        };

        const ORDER_STAGES = [
            { label: "Order Placed", status: "Thank you! Your order has been placed and is confirmed in our system." },
            { label: "Preparing", status: "Your pizza is currently being prepared and built by our pizza artists." },
            { label: "Baking", status: "Your pizza is currently baking in the oven. Estimated 10‚Äì15 minutes." },
            { label: "Out for Delivery", status: "Great news! Your pizza is out for delivery. Estimated arrival: {time}." },
            { label: "Delivered", status: "Enjoy your Geneeys Pizza! Thank you for calling." }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            setupNavigation();
            setupAccordion();
            setupToppingsTable();
            setupToppingsFilter();
            setupOrderTracking();
            setupScenarioPicker();
            setupNotesCopy();
            setupSuggestedCombinations();

            // Set initial delivery time to 30 minutes from now
            const now = new Date();
            now.setMinutes(now.getMinutes() + 30); 
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const edt = `${hours}:${minutes}`;
            document.getElementById('est-delivery-time').value = edt;

            // Set order to "Out for Delivery" stage (index 3)
            updateOrderTrackingVisual(3); 
            document.getElementById('current-stage-select').value = '3';
        });

        function setupNavigation() {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentPanels = document.querySelectorAll('.content-panel');

            navButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const targetPanelId = e.currentTarget.getAttribute('data-panel');

                    navButtons.forEach(btn => btn.classList.remove('active'));
                    contentPanels.forEach(panel => panel.classList.remove('active'));

                    e.currentTarget.classList.add('active');
                    document.getElementById(targetPanelId).classList.add('active');
                });
            });
        }

        function setupToppingsTable() {
            const tbody = document.querySelector('#toppings-table tbody');
            TOPPINGS_DATA.forEach(topping => {
                const row = tbody.insertRow();
                row.setAttribute('data-name', topping.name.toLowerCase());
                
                row.insertCell().textContent = topping.name;
                row.insertCell().textContent = topping.category;
                
                const availabilityCell = row.insertCell();
                availabilityCell.textContent = topping.available ? "Yes" : "No";
                availabilityCell.className = topping.available ? "available-yes" : "available-no";

                row.insertCell().textContent = topping.notes;
            });
        }

        function setupToppingsFilter() {
            const searchInput = document.getElementById('topping-search');
            searchInput.addEventListener('input', (e) => {
                const filter = e.target.value.toLowerCase();
                const rows = document.querySelectorAll('#toppings-table tbody tr');

                rows.forEach(row => {
                    const toppingName = row.getAttribute('data-name');
                    if (toppingName.includes(filter)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        }
        
        function setupSuggestedCombinations() {
            const comboContainer = document.getElementById('suggested-combinations');
            const comboDescription = document.getElementById('combo-description');

            comboContainer.addEventListener('click', (e) => {
                if (e.target.tagName === 'SPAN') {
                    const preset = e.target.getAttribute('data-preset');
                    const combo = COMBO_DATA[preset];

                    document.querySelectorAll('#suggested-combinations span').forEach(span => {
                        span.style.background = 'linear-gradient(135deg, #fff5e6 0%, #ffe8cc 100%)';
                        span.style.borderColor = 'transparent';
                    });
                    
                    if (combo) {
                        e.target.style.background = 'linear-gradient(135deg, #ffd8a8 0%, #ffc078 100%)';
                        e.target.style.borderColor = '#ffa94d'; 
                        
                        const toppingsList = combo.toppings.join(', ');
                        comboDescription.innerHTML = `<strong>${combo.name}:</strong> ${combo.desc} (Key Toppings: ${toppingsList})`;
                    }
                }
            });
        }

        function setupAccordion() {
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const expanded = header.getAttribute('aria-expanded') === 'true' || false;

                    if (content.style.display === 'block') {
                        content.style.display = 'none';
                        header.setAttribute('aria-expanded', 'false');
                        header.querySelector('.material-icons').textContent = 'expand_more';
                    } else {
                        document.querySelectorAll('.accordion-content').forEach(c => c.style.display = 'none');
                        document.querySelectorAll('.accordion-header').forEach(h => {
                             h.setAttribute('aria-expanded', 'false');
                             h.querySelector('.material-icons').textContent = 'expand_more';
                        });

                        content.style.display = 'block';
                        header.setAttribute('aria-expanded', 'true');
                        header.querySelector('.material-icons').textContent = 'expand_less';
                    }
                });
            });
        }

        function updateOrderTrackingVisual(currentStageIndex) {
            const steps = document.querySelectorAll('#order-stepper .step');
            const edt = document.getElementById('est-delivery-time').value;
            const messageBox = document.getElementById('order-status-message');

            steps.forEach((step, index) => {
                step.classList.remove('completed', 'active');
                if (index < currentStageIndex) {
                    step.classList.add('completed');
                } else if (index === currentStageIndex) {
                    step.classList.add('active');
                }
            });

            let status = ORDER_STAGES[currentStageIndex].status;
            
            if (currentStageIndex === 3) {
                status = status.replace('{time}', edt || 'TBD');
            }
            
            messageBox.textContent = status;
        }

        function setupOrderTracking() {
            const updateButton = document.getElementById('update-stage-button');
            const stageSelect = document.getElementById('current-stage-select');

            updateButton.addEventListener('click', () => {
                const newStage = parseInt(stageSelect.value);
                updateOrderTrackingVisual(newStage);
            });
            
            document.getElementById('est-delivery-time').addEventListener('input', () => {
                const currentStage = parseInt(stageSelect.value);
                if (currentStage === 3) {
                     updateOrderTrackingVisual(currentStage);
                }
            });
        }

        function setupScenarioPicker() {
            const scenarioGrid = document.getElementById('scenario-grid');
            const detailsDiv = document.getElementById('scenario-details');
            const scriptTextarea = document.getElementById('suggested-script');
            const actionCheckboxes = document.querySelectorAll('#possible-actions input');

            scenarioGrid.addEventListener('click', (e) => {
                if (e.target.classList.contains('scenario-card')) {
                    const scenarioKey = e.target.getAttribute('data-scenario');
                    const scenarioData = SCENARIOS[scenarioKey];

                    document.querySelectorAll('.scenario-card').forEach(card => card.classList.remove('selected'));
                    e.target.classList.add('selected');

                    actionCheckboxes.forEach(checkbox => checkbox.checked = false);

                    if (scenarioData) {
                        scriptTextarea.value = scenarioData.script;
                        detailsDiv.style.display = 'block';

                        scenarioData.actions.forEach(index => {
                            actionCheckboxes[index].checked = true;
                        });
                    }
                }
            });
        }

        function setupNotesCopy() {
            const copyButton = document.getElementById('copy-notes-button');
            const notesTextarea = document.getElementById('call-notes');
            const confirmSpan = document.getElementById('copy-confirm');

            copyButton.addEventListener('click', () => {
                notesTextarea.select();
                notesTextarea.setSelectionRange(0, 99999);

                try {
                    navigator.clipboard.writeText(notesTextarea.value).then(() => {
                        confirmSpan.style.opacity = 1;
                        setTimeout(() => confirmSpan.style.opacity = 0, 1500);
                    }).catch(err => {
                        document.execCommand('copy');
                        confirmSpan.style.opacity = 1;
                        setTimeout(() => confirmSpan.style.opacity = 0, 1500);
                    });
                } catch (err) {
                    document.execCommand('copy');
                    confirmSpan.style.opacity = 1;
                    setTimeout(() => confirmSpan.style.opacity = 0, 1500);
                }
            });
        }
    </script>
</body>
</html>
